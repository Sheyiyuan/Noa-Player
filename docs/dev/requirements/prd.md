# Noa Studio — 需求文档（PRD / Local-First Edition）
版本：v0.5-local-first  
状态：Draft  
更新日期：2026-02-18  
产品代号：Noa Studio  
目标平台：跨平台桌面（Linux、Windows、macOS）  
形态：Electron 桌面应用（本地优先）

---

## 1. 产品定位
- **视频学习工作台**：围绕「播放 → 截图/GIF → OCR → Markdown 笔记」形成一体化闭环。
- **三栏固定布局**：左播放器、中资源库、右笔记编辑器，减少界面切换成本。
- **本地优先、文件透明**：一个工程就是一个普通文件夹，无数据库依赖、无私有格式锁定。
- **轻量 AI 增强**：AI 完全可选，用户自填 API Key，无平台中转服务。

---

## 2. 目标用户与核心场景
### 2.1 目标用户
- 语言学习者：高频复读 + 时间戳记笔记
- 知识工作者：从视频抽取关键帧、文字证据并沉淀为 Markdown
- 内容研究者：需要本地离线可控、可迁移的资料工程

### 2.2 核心场景
1) 打开本地视频或直链，边看边记，插入时间戳可一键回跳。  
2) 一键截图或录制 GIF，资源自动归档并同步插入笔记。  
3) 对截图执行 OCR，结果自动排版后进入笔记。  
4) 标记 AB 区间循环复读，笔记中插入 `[AB mm:ss-mm:ss]` 并可点击激活。

---

## 3. 信息架构与布局
### 3.1 主窗口（固定三栏）
- 左栏：视频播放器 + 控制面板
  - 播放、进度、音量、倍速、时间戳显示
  - AB 复读标记（A/B/取消）
  - 截图入口、GIF 录制入口
- 中栏：资源库
  - 自动收纳截图、GIF、OCR 文字、本地图片
  - 支持预览、拖拽到笔记、重命名、删除
  - 按时间戳/文件类型排序
- 右栏：Markdown 笔记编辑器
  - 极简编辑、自动保存
  - 插入图片、时间戳、AB 标记
  - 纯文本 `.md` 持久化

### 3.2 多屏专业模式
- 可开启独立视频窗口（无边框、纯画面、无控件、可全屏）
- 所有控制操作仍在主窗口执行（副屏仅显示）
- 支持单屏悬浮模式（小窗置顶 + 点击穿透）

---

## 4. 功能范围（Scope）
### 4.1 MVP（优先实现）
- 三栏基础布局（左播放器/中资源库/右编辑器）
- 视频播放（本地文件 + 直链）与时间戳插入/回跳
- 一键截图 + 自动归档 + 自动插入笔记
- 极简 Markdown 编辑器 + 自动保存
- 资源库基础管理（预览/拖拽/删除/排序）
- 工程文件夹模式（`xxx.md + assets/`）
- OCR 基础能力（截图文字提取）

### 4.2 后续迭代（非 MVP）
- GIF 录制（含基于 AB 片段快速生成）
- AB 复读完整增强（模板化管理、批量切换）
- 多屏窗口增强（更多显示策略）
- Git 版本控制辅助
- AI 增强（总结/翻译/大纲生成）
- 插件系统、全局搜索、多笔记 Tab、ZIP 导出、自定义快捷键、主题切换

### 4.3 明确不做（当前版本）
- 云同步与账号体系
- 平台代管 API Key
- 私有笔记格式与数据库锁定

---

## 5. 功能需求（FR）
### 5.1 播放与时间轴
- FR-PL-01：支持本地视频文件播放
- FR-PL-02：支持视频直链播放
- FR-PL-03：支持进度跳转、倍速、音量、全屏
- FR-PL-04：实时显示当前时间戳
- FR-PL-05：笔记中的时间戳点击后可跳转视频到对应秒

### 5.2 AB 复读
- FR-AB-01：一键标记 A 点
- FR-AB-02：一键标记 B 点并开始区间循环
- FR-AB-03：支持随时取消循环
- FR-AB-04：支持插入 `[AB mm:ss-mm:ss]` 到笔记并点击激活

### 5.3 截图与 GIF
- FR-CAP-01：一键截图当前帧并自动写入资源库
- FR-CAP-02：截图自动附带时间戳元数据
- FR-CAP-03：截图后自动插入笔记
- FR-GIF-01：支持设置开始/结束录制 GIF
- FR-GIF-02：支持直接录制 AB 区间为 GIF
- FR-GIF-03：GIF 与截图统一归档到同一资源库
- FR-GIF-04：GIF 处理基于 `ffmpeg.wasm`，全程本地执行

### 5.4 笔记编辑器
- FR-ED-01：支持基础 Markdown（标题/加粗/列表/链接）
- FR-ED-02：支持图片/GIF 拖拽插入
- FR-ED-03：支持时间戳与 AB 标记快捷插入
- FR-ED-04：自动保存，异常退出后内容可恢复
- FR-ED-05：笔记保存为标准 `.md`

### 5.5 资源库
- FR-LIB-01：自动归档截图/GIF/OCR 文本/本地图片
- FR-LIB-02：支持预览和大图查看
- FR-LIB-03：支持重命名与删除
- FR-LIB-04：支持按时间戳与文件类型排序
- FR-LIB-05：支持拖拽资源到编辑器插入引用

### 5.6 工程与文件结构
- FR-PROJ-01：一个工程对应一个普通文件夹
- FR-PROJ-02：工程至少包含 `xxx.md` 与 `assets/`
- FR-PROJ-03：无需额外配置文件即可拷贝/备份/分享
- FR-PROJ-04：默认不联网上传，数据归用户本地所有

### 5.7 AI（可选增强）
- FR-AI-01：用户自行配置 API Key 与模型参数
- FR-AI-02：支持截图 OCR 结果自动排版整理
- FR-AI-03：支持选中文字执行总结/翻译
- FR-AI-04：支持生成笔记大纲（可选）

---

## 6. 非功能需求（NFR）
- NFR-01：主链路本地可用，不依赖云端服务
- NFR-02：自动保存默认开启，避免内容丢失
- NFR-03：窗口交互清晰，副屏不抢焦点、不遮挡主操作
- NFR-04：资源落盘路径稳定可追溯
- NFR-05：跨平台行为一致（Linux/Windows/macOS）

---

## 7. 成功指标（MVP）
- 首次打开本地视频成功率 ≥ 95%
- 一键截图成功率 ≥ 99%
- 截图到资源库可见 P95 < 1s（不含 OCR）
- 自动保存恢复成功率 ≥ 99%
- OCR 可读文本产出率 ≥ 85%

---

## 8. 里程碑版本定义
### v0.1（MVP）
- 三栏布局 + 视频播放 + 时间戳系统
- 一键截图 + 自动归档 + 笔记自动插入
- 极简 Markdown 编辑器 + 自动保存
- 资源库基础管理 + 工程文件夹模式
- OCR 基础能力

### v0.2
- GIF 录制（含 AB 快捷录制）
- AB 复读增强（可管理多组标记）
- 多屏模式增强（副屏/悬浮模式完善）

### v0.3+
- AI 增强功能完善
- Git 版本控制辅助
- 插件系统与更多扩展能力

---

## 9. 风险与决策
- `ffmpeg.wasm` 在低配设备上的性能波动：MVP 不阻塞主链路，优先保证截图稳定。
- 多屏窗口在不同桌面环境行为差异：先实现稳定最小交互，再做高级窗口策略。
- AI 能力存在外部 API 波动：全部降级为可关闭的可选能力，不影响核心流程。
